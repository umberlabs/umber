#!/bin/bash
# UM Utility 1.2

echo "UM: Loaded main script. Starting..."

function err_exit() {
    echo "Installation failed. Please try again."
    exit 1
}
trap "err_exit" ERR

export DEBIAN_FRONTEND=noninteractive

read -r -p "UM: Install Homebrew? [Y/n] " hb
case $hb in
    [yY][eE][sS]|[yY])
        echo "UM: Installing Homebrew..."
        /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    ;;
    [nN][oO]|[nN]|'')
        echo "UM: Skipping..."
    ;;
esac

read -r -p "UM: Install wget? [Y/n] " wg
case $wg in
    [yY][eE][sS]|[yY])
        echo "UM: Installing wget..."
        brew install wget
    ;;
    [nN][oO]|[nN]|'')
        echo "UM: Skipping..."
    ;;
esac

read -r -p "UM: Install Node.js? [Y/n] " nj
case $nj in
    [yY][eE][sS]|[yY])
        echo "UM: Installing Node.js..."
        cd 
        mkdir um-temp
        cd um-temp
        curl -o node.pkg https://nodejs.org/dist/v14.15.2/node-v14.15.2.pkg
        sudo installer -pkg node.pkg -target /
        echo "UM: Node.js: Cleaning up..."
        cd 
        rm -rf um-temp
    ;;
    [nN][oO]|[nN]|'')
        echo "UM: Skipping..."
    ;;
esac

echo "UM has finished! Enjoy your new software!"
